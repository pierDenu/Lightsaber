# LED Sword (MPU6050 + WS2812 + SD Audio)

Проєкт “світлового меча” на Arduino: лезо на адресній світлодіодній стрічці WS2812, звук із SD-карти (TMRpcm) та реакція на рух/удари за даними інерціального датчика MPU6050.

## Опис проєкту

Пристрій імітує поведінку “світлового меча” з підсвіткою та звуковими ефектами:
- при увімкненні запускається анімація “розпалювання” леза та звук старту;
- під час руху (махів) відтворюються звуки маху;
- під час ударів (різкої зміни прискорення) відтворюються звуки удару, а лезо коротко спалахує білим;
- у стані спокою відтворюється фоновий “гул” (loop), який періодично перезапускається;
- кнопкою можна циклічно змінювати колір леза.

## Демонстрація проєкту



## Принцип роботи

### 1) Зчитування руху (MPU6050)
На кожній ітерації `loop()` з MPU6050 зчитуються:
- прискорення по осях `ax, ay, az`
- кутові швидкості по осях `gx, gy, gz`

Дані масштабуються (ділення на 100) і береться модуль, після чого обчислюються дві величини:
- `ACC` — умовна “сила удару”: модуль вектора прискорення  
  `ACC = sqrt(ax^2 + ay^2 + az^2)`
- `GYR` — умовна “інтенсивність маху”: модуль вектора гіроскопа  
  `GYR = sqrt(gx^2 + gy^2 + gz^2)`

### 2) Детекція махів
Якщо `GYR` перевищує поріг (мах), відтворюється випадковий звук маху:
- `SWL1.wav … SWL4.wav`

Щоб уникнути “дроблення” та повторного тригера на тому ж русі, використовується `timeoutMs`:
- після запуску звуку встановлюється таймаут із масиву `swing_time_L[]`;
- до завершення таймауту нові махи ігноруються.

### 3) Детекція ударів
Удар визначається за `ACC`:
- **короткий удар**: `60 < ACC < 150` → `SKS1.wav … SKS8.wav`
- **сильний удар**: `ACC >= 150` → `SK1.wav … SK8.wav`

Паралельно з аудіо робиться короткий візуальний ефект:
- лезо спалахує білим на 50–100 мс;
- повертається до поточного кольору.

Як і для махів, після удару ставиться `timeoutMs` з відповідного масиву (`strike_s_time[]` або `strike_time[]`).

### 4) Фоновий “гул” у стані спокою
Якщо протягом `timeoutMs` немає махів/ударів:
- запускається `HUM.wav` у loop-режимі (параметр бібліотеки TMRpcm);
- кожні ~5 секунд гул перезапускається, щоб підтримувати безперервне звучання.

### 5) Зміна кольору кнопкою
Кнопка підключена як `INPUT_PULLUP`:
- натиснута кнопка читається як `LOW`;
- використано простий антидребезг по часу (~300 мс);
- кожне натискання циклічно змінює індекс кольору (5 варіантів).

## Hardware (перелік компонентів)

- **Arduino** (плата з підтримкою SPI/I2C; типово UNO/Nano застосовні).
- **MPU6050** (акселерометр + гіроскоп, I2C).
- **WS2812/WS2812B LED strip**, 5V (у проєкті: `NUMLEDS = 87`).
- **MicroSD модуль** + microSD карта (SPI).
- **Динамік/п’єзо** для відтворення WAV через **TMRpcm** (PWM pin).
- **Кнопка** (зміна кольору).
- **Живлення 5V** з достатнім струмовим запасом для стрічки.


